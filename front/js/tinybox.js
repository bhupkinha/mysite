TINY={},TINY.box=function(){var e,t,i,n,o,a=0;return{show:function(l){o={opacity:70,close:1,animate:1,fixed:1,mask:1,maskid:"",boxid:"",topsplit:2,url:0,post:0,height:0,width:0,html:0,iframe:0};for(s in l)o[s]=l[s];a?(e.style.display="none",clearTimeout(a.ah),n.v&&(a.removeChild(n),n.v=0)):(e=document.createElement("div"),e.className="tbox",a=document.createElement("div"),a.className="tinner",i=document.createElement("div"),i.className="tcontent",t=document.createElement("div"),t.className="tmask",n=document.createElement("div"),n.className="tclose",n.v=0,document.body.appendChild(t),document.body.appendChild(e),e.appendChild(a),a.appendChild(i),t.onclick=n.onclick=TINY.box.hide,window.onresize=TINY.box.resize),a.id=o.boxid,t.id=o.maskid,e.style.position=o.fixed?"fixed":"absolute",o.html&&!o.animate?(a.style.backgroundImage="none",i.innerHTML=o.html,i.style.display="",a.style.width=o.width?o.width+"px":"auto",a.style.height=o.height?o.height+"px":"auto"):(i.style.display="none",!o.animate&&o.width&&o.height?(a.style.width=o.width+"px",a.style.height=o.height+"px"):a.style.width=a.style.height="100px"),o.mask?(this.mask(),this.alpha(t,1,o.opacity)):this.alpha(e,1,100),o.autohide?a.ah=setTimeout(TINY.box.hide,1e3*o.autohide):document.onkeyup=TINY.box.esc},fill:function(e,t,i,n,s,l){if(t)if(o.image){var h=new Image;h.onload=function(){s=s||h.width,l=l||h.height,TINY.box.psh(h,n,s,l)},h.src=o.image}else if(o.iframe)this.psh('<iframe src="'+o.iframe+'" width="'+o.width+'" frameborder="0" height="'+o.height+'"></iframe>',n,s,l);else{var d=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");d.onreadystatechange=function(){4==d.readyState&&200==d.status&&(a.style.backgroundImage="",TINY.box.psh(d.responseText,n,s,l))},i?(d.open("POST.html",e,!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(i)):(d.open("GET.html",e,!0),d.send(null))}else this.psh(e,n,s,l)},psh:function(e,t,n,s){"object"==typeof e?i.appendChild(e):i.innerHTML=e;var o=a.style.width,l=a.style.height;n&&s||(a.style.width=n?n+"px":"",a.style.height=s?s+"px":"",i.style.display="",s||(s=parseInt(i.offsetHeight)),n||(n=parseInt(i.offsetWidth)),i.style.display="none"),a.style.width=o,a.style.height=l,this.size(n,s,t)},esc:function(e){e=e||window.event,27==e.keyCode&&TINY.box.hide()},hide:function(){TINY.box.alpha(e,-1,0,3),document.onkeypress=null,o.closejs&&o.closejs()},resize:function(){TINY.box.pos(),TINY.box.mask()},mask:function(){t.style.height=this.total(1)+"px",t.style.width=this.total(0)+"px"},pos:function(){var t;"undefined"!=typeof o.top?t=o.top:(t=this.height()/o.topsplit-e.offsetHeight/2,t=20>t?20:t),o.fixed||o.top||(t+=this.top()),e.style.top=t+"px",e.style.left="undefined"!=typeof o.left?o.left+"px":this.width()/2-e.offsetWidth/2+"px"},alpha:function(e,t,i){clearInterval(e.ai),t&&(e.style.opacity=0,e.style.filter="alpha(opacity=0)",e.style.display="block",TINY.box.pos()),e.ai=setInterval(function(){TINY.box.ta(e,i,t)},20)},ta:function(n,s,l){var h=Math.round(100*n.style.opacity);if(h==s)clearInterval(n.ai),-1==l?(n.style.display="none",n==e?TINY.box.alpha(t,-1,0,2):i.innerHTML=a.style.backgroundImage=""):n==t?this.alpha(e,1,100):(e.style.filter="",TINY.box.fill(o.html||o.url,o.url||o.iframe||o.image,o.post,o.animate,o.width,o.height));else{var d=s-Math.floor(.5*Math.abs(s-h))*l;n.style.opacity=d/100,n.style.filter="alpha(opacity="+d+")"}},size:function(e,t,s){if(s){clearInterval(a.si);var l=parseInt(a.style.width)>e?-1:1,h=parseInt(a.style.height)>t?-1:1;a.si=setInterval(function(){TINY.box.ts(e,l,t,h)},20)}else a.style.backgroundImage="none",o.close&&(a.appendChild(n),n.v=1),a.style.width=e+"px",a.style.height=t+"px",i.style.display="",this.pos(),o.openjs&&o.openjs()},ts:function(e,t,s,l){var h=parseInt(a.style.width),d=parseInt(a.style.height);h==e&&d==s?(clearInterval(a.si),a.style.backgroundImage="none",i.style.display="block",o.close&&(a.appendChild(n),n.v=1),o.openjs&&o.openjs()):(h!=e&&(a.style.width=e-Math.floor(.6*Math.abs(e-h))*t+"px"),d!=s&&(a.style.height=s-Math.floor(.6*Math.abs(s-d))*l+"px"),this.pos())},top:function(){return document.documentElement.scrollTop||document.body.scrollTop},width:function(){return self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},total:function(e){var t=document.body,i=document.documentElement;return e?Math.max(Math.max(t.scrollHeight,i.scrollHeight),Math.max(t.clientHeight,i.clientHeight)):Math.max(Math.max(t.scrollWidth,i.scrollWidth),Math.max(t.clientWidth,i.clientWidth))}}}();
